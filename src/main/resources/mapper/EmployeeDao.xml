<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.atguigu.curd.dao.EmployeeMapper">
        <resultMap id="BaseResultMap" type="com.atguigu.curd.bean.Employee">
                <!--
                  WARNING - @mbg.generated
                  This element is automatically generated by MyBatis Generator, do not modify.
                  This element was generated on Thu Nov 18 19:44:01 CST 2021.
                -->
                <id column="emp_id" jdbcType="INTEGER" property="empId" />
                <result column="emp_name" jdbcType="VARCHAR" property="empName" />
                <result column="gender" jdbcType="CHAR" property="gender" />
                <result column="email" jdbcType="VARCHAR" property="email" />
                <result column="d_id" jdbcType="INTEGER" property="dId" />
        </resultMap>
        <!--  指定新的结果映射-->
        <resultMap id="WithDept" type="com.atguigu.curd.bean.Employee">
                <id column="emp_id" jdbcType="INTEGER" property="empId" />
                <result column="emp_name" jdbcType="VARCHAR" property="empName" />
                <result column="gender" jdbcType="CHAR" property="gender" />
                <result column="email" jdbcType="VARCHAR" property="email" />
                <result column="d_id" jdbcType="INTEGER" property="dId" />
                <!--    指定部门对象的连接-->
                <association property="department" javaType="com.atguigu.curd.bean.Department">
                        <id column="dept_id" property="deptId"></id>
                        <result column="dept_name" property="deptName"></result>
                </association>
        </resultMap>
        <sql id="Example_Where_Clause">
                <where>
                        <foreach collection="oredCriteria" item="criteria" separator="or">
                                <if test="criteria.valid">
                                        <trim prefix="(" prefixOverrides="and" suffix=")">
                                                <foreach collection="criteria.criteria" item="criterion">
                                                        <choose>
                                                                <when test="criterion.noValue">
                                                                        and ${criterion.condition}
                                                                </when>
                                                                <when test="criterion.singleValue">
                                                                        and ${criterion.condition} #{criterion.value}
                                                                </when>
                                                                <when test="criterion.betweenValue">
                                                                        and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                                                </when>
                                                                <when test="criterion.listValue">
                                                                        and ${criterion.condition}
                                                                        <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                                                                                #{listItem}
                                                                        </foreach>
                                                                </when>
                                                        </choose>
                                                </foreach>
                                        </trim>
                                </if>
                        </foreach>
                </where>
        </sql>
        <sql id="Update_By_Example_Where_Clause">
                <where>
                        <foreach collection="example.oredCriteria" item="criteria" separator="or">
                                <if test="criteria.valid">
                                        <trim prefix="(" prefixOverrides="and" suffix=")">
                                                <foreach collection="criteria.criteria" item="criterion">
                                                        <choose>
                                                                <when test="criterion.noValue">
                                                                        and ${criterion.condition}
                                                                </when>
                                                                <when test="criterion.singleValue">
                                                                        and ${criterion.condition} #{criterion.value}
                                                                </when>
                                                                <when test="criterion.betweenValue">
                                                                        and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                                                </when>
                                                                <when test="criterion.listValue">
                                                                        and ${criterion.condition}
                                                                        <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                                                                                #{listItem}
                                                                        </foreach>
                                                                </when>
                                                        </choose>
                                                </foreach>
                                        </trim>
                                </if>
                        </foreach>
                </where>
        </sql>
        <sql id="Base_Column_List">
                emp_id, emp_name, gender, email, d_id
        </sql>
        <sql id="WithDept_Column_List">
                e.emp_id, e.emp_name, e.gender, e.email, e.d_id,d.dept_id,d.dept_name
        </sql>
        <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
                delete from tbl_emp
                where emp_id = #{empId,jdbcType=INTEGER}
        </delete>
        <delete id="deleteBatch" parameterType="java.util.List">
            delete from tbl_emp where emp_id IN
                 <foreach collection="array" item="outputId" open="(" separator="," close=")">
                        #{outputId}
                 </foreach>
        </delete>
        <delete id="deleteByExample" parameterType="com.atguigu.curd.bean.EmployeeExample">
                delete from tbl_emp
                <if test="_parameter != null">
                        <include refid="Example_Where_Clause" />
                </if>
        </delete>
        <insert id="insert" parameterType="com.atguigu.curd.bean.Employee">
                insert into tbl_emp (emp_id, emp_name, gender,
                email, d_id)
                values (#{empId,jdbcType=INTEGER}, #{empName,jdbcType=VARCHAR}, #{gender,jdbcType=CHAR},
                #{email,jdbcType=VARCHAR}, #{dId,jdbcType=INTEGER})
        </insert>
        <insert id="insertSelective" parameterType="com.atguigu.curd.bean.Employee">
                insert into tbl_emp
                <trim prefix="(" suffix=")" suffixOverrides=",">
                        <if test="empId != null">
                                emp_id,
                        </if>
                        <if test="empName != null">
                                emp_name,
                        </if>
                        <if test="gender != null">
                                gender,
                        </if>
                        <if test="email != null">
                                email,
                        </if>
                        <if test="dId != null">
                                d_id,
                        </if>
                </trim>
                <trim prefix="values (" suffix=")" suffixOverrides=",">
                        <if test="empId != null">
                                #{empId,jdbcType=INTEGER},
                        </if>
                        <if test="empName != null">
                                #{empName,jdbcType=VARCHAR},
                        </if>
                        <if test="gender != null">
                                #{gender,jdbcType=CHAR},
                        </if>
                        <if test="email != null">
                                #{email,jdbcType=VARCHAR},
                        </if>
                        <if test="dId != null">
                                #{dId,jdbcType=INTEGER},
                        </if>
                </trim>
        </insert>
        <update id="updateByPrimaryKey" parameterType="com.atguigu.curd.bean.Employee">
                <!--
                  WARNING - @mbg.generated
                  This element is automatically generated by MyBatis Generator, do not modify.
                  This element was generated on Thu Nov 18 19:44:01 CST 2021.
                -->
                update tbl_emp
                set emp_name = #{empName,jdbcType=VARCHAR},
                gender = #{gender,jdbcType=CHAR},
                email = #{email,jdbcType=VARCHAR},
                d_id = #{dId,jdbcType=INTEGER}
                where emp_id = #{empId,jdbcType=INTEGER}
        </update>
        <update id="updateByPrimaryKeySelective" parameterType="com.atguigu.curd.bean.Employee">
                <!--
                  WARNING - @mbg.generated
                  This element is automatically generated by MyBatis Generator, do not modify.
                  This element was generated on Thu Nov 18 19:44:01 CST 2021.
                -->
                update tbl_emp
                set
                gender = #{gender,jdbcType=CHAR},
                email = #{email,jdbcType=VARCHAR},
                d_id = #{dId,jdbcType=INTEGER}
                where emp_id = #{empId,jdbcType=INTEGER}
        </update>
        <!--  查询员工同时查出部门信息-->
        <select id="selectAllWithDept" resultMap="WithDept">
                select emp_id,emp_name,gender,email,d_id,dept_id,dept_name
                from tbl_emp left join tbl_dept on tbl_emp.d_id=tbl_dept.dept_id
        </select>
        <select id="selectByPrimaryKeyWithDept" resultMap="WithDept">
                select emp_id,emp_name,gender,email,d_id,dept_id,dept_name
                from tbl_emp left join tbl_dept on tbl_emp.d_id=tbl_dept.dept_id
                where emp_id = #{empId,jdbcType=INTEGER}

        </select>
        <!--  查询员工不带部门信息-->
        <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
                <!--
                  WARNING - @mbg.generated
                  This element is automatically generated by MyBatis Generator, do not modify.
                  This element was generated on Thu Nov 18 19:44:01 CST 2021.
                -->
                select emp_id, emp_name, gender, email, d_id
                from tbl_emp
                where emp_id = #{empId,jdbcType=INTEGER}
        </select>
        <select id="selectAll" resultMap="BaseResultMap">
                select emp_id, emp_name, gender, email, d_id
                from tbl_emp
        </select>
        <select id="countByExample" parameterType="com.atguigu.curd.bean.EmployeeExample" resultType="java.lang.Long">
                select count(*) from tbl_emp
                <if test="_parameter != null">
                        <include refid="Example_Where_Clause" />
                </if>
        </select>

</mapper>